#!/usr/bin/env perl
use v5.18;
use FindBin;
use lib "$FindBin::Bin/../lib";

use Getopt::Std;

use Img;
use Img::Hashing;

my %opts;
getopts('m:', \%opts);

my $method = ($opts{m} || "average_hash");
my $hashing = Img::Hashing->can($method) or die;

for my $file (@ARGV) {
    my $img = Img->new(file=>$file) or die Img->errstr;
    printf "%016x %s\n", $hashing->($img), $file;
}
